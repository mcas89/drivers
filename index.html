<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>App Motorista</title>

  <link rel="stylesheet" href="estilos.css"> 
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>
<body>

  <div class="container" id="loginContainer">
    <h2><i class="fas fa-user-shield"></i> Login Motorista</h2>
    <input type="text" id="cpf" placeholder="CPF" maxlength="11" oninput="this.value = this.value.replace(/\D/g, '').slice(0, 11)">
    <input type="password" id="senha" placeholder="Senha">
    <button onclick="loginMotorista()">
      <i class="fas fa-sign-in-alt"></i> Entrar
    </button>
    <p>Não tem cadastro? <a href="#" onclick="mostrarCadastro()">Cadastre-se</a></p>
  </div>

  <div class="container hidden" id="cadastroContainer">
    <h2><i class="fas fa-id-card"></i> Cadastro Motorista</h2>
    <input type="text" id="nomeCadastro" placeholder="Nome">
    <input type="text" id="cpfCadastro" placeholder="CPF" maxlength="11" oninput="this.value = this.value.replace(/\D/g, '').slice(0, 11)" />
    <input type="password" id="senhaCadastro" placeholder="Senha">
    <input type="text" id="telefoneCadastro" placeholder="Telefone">
    <input type="text" id="modeloCadastro" placeholder="Marca - Modelo - Cor">
    <input type="text" id="placaCadastro" placeholder="Placa">
      <select id="BairroPai">
        <option value="">Bairro</option>
      </select>
    <button onclick="cadastrarMotorista()">
      <i class="fas fa-user-plus"></i> Cadastrar
    </button>
    <p><a href="#" onclick="mostrarLogin()">Já tem conta? Entrar</a></p>
  </div>

  <div class="container" id="painelMotorista">

      <div class="container" id="painelMotorista">

      <!-- Linha de ícones no topo -->
      <div class="topoIcons">

        <!-- Créditos -->
        <div class="iconItem" onclick="window.open('https://wa.me/5531983919015?text=Ol%C3%A1%20venho%20atraves%20do%20app%20para%20comprar%20mais%20creditos', '_blank')">
          <i class="fas fa-wallet"></i>
          <span id="creditosMotorista">0</span>
        </div>

        <!-- Bairro -->
        <div class="iconItem" onclick="abrirCardEditarBairro()" >
          <i class="fas fa-map-marker-alt"></i>
          <span class="iconText" id="bairroMotorista"></span>
        </div>

        <!-- Editar -->
        <div class="iconItem" onclick="editarDadosMotorista()">
          <i class="fas fa-pen"></i>
          <span class="iconText">Editar</span>
        </div>

        <!-- Histórico -->
        <div class="iconItem" onclick="carregarHistoricoMotorista()">
          <i class="fas fa-clock"></i>
          <span class="iconText">Histórico</span>
        </div>

        <!-- Chat -->
        <div class="iconItem" onclick="toggleChatPopup()">
          <div class="iconWrapper">
            <i class="fas fa-comments"></i>
            <span class="notification-dot hidden" id="chatNotificacao"></span>
          </div>
          <span class="iconText">Chat</span>
        </div>

        <!-- Sair -->
        <div class="iconItem" onclick="logoutMotorista()">
          <i class="fas fa-sign-out-alt"></i>
          <span class="iconText">Sair</span>
        </div>

         </div>

      <!-- Informações do motorista -->
      <div class="cardPainel">

        <span id="totalViagens" style="font-size: 0.6em; color: #555; display: block; margin-bottom: -6px;"></span>

        <h2>        
          <i id="toggleCorridasButton" class="fas fa-power-off" style="cursor: pointer; margin-right: 10px;" onclick="toggleCorridas()"></i>
          <span id="nomeMotorista">Nome do Motorista</span>
        </h2>

        <p><i class="fas fa-phone"></i> <span id="telefoneMotorista">Telefone</span></p>
        <p><i class="fas fa-car-side"></i> <span id="modeloMotorista">Modelo</span> - <span id="placaMotorista">Placa</span></p>
      </div>


    
    </div>

      <!-- Título que pode ser ocultado -->
      <h3 id="corridasDisponiveis">
        <i class="fas fa-taxi"></i> buscando corridas
        <i id="loadingIcon" class="fas fa-spinner fa-spin hidden" style="margin-left: 10px;"></i>
      </h3>

      
    <div id="corridasContainer"></div>

    <div id="corridaAceitaCard" class="card hidden card-corrida">
      <div class="card-header">
        <h4 class="card-title" style="display: flex; align-items: center; justify-content: center; width: 100%; margin: 0;">
          <i class="fas fa-check-circle icon-green" style="margin-right: 8px;"></i>
          Corrida Aceita
        </h4>
      </div>
    
    
      <!-- Bloco de partida -->
      <div class="info-bloco">
        <div class="info-linha">
          <i class="fas fa-map-marker-alt icon-red"></i> 
          <strong>Partida:</strong>
          <i class="fas fa-copy icon-copy" onclick="copiarTexto('endPartida')" style="margin-left: 10px; font-size: 16px;"></i>
          <i class="fas fa-location-arrow icon-blue" onclick="navegarPassageiro()" style="margin-left: 10px; cursor: pointer; font-size: 16px;"></i>
        </div>
        <p id="endPartida" class="endereco-texto"></p>
      </div>
    
      <!-- Bloco de destino -->
      <div class="info-bloco">
        <div class="info-linha">
          <i class="fas fa-map-pin icon-blue"></i> 
          <strong>Destino:</strong>
          <i class="fas fa-copy icon-copy" onclick="copiarTexto('endDestino')" style="margin-left: 10px; font-size: 16px;"></i>
          <i class="fas fa-location-arrow icon-blue" onclick="navegarDestino()" style="margin-left: 10px; cursor: pointer; font-size: 16px;"></i>
        </div>
        <p id="endDestino" class="endereco-texto"></p>
      </div>
    
      <!-- Bloco de valores -->
      <div class="info-valores">
        <p>
          <i class="fas fa-coins icon-gold"></i> 
          <strong>Valor:</strong> <span id="valorCorrida"></span>
        </p>
        <p>
          <i class="fas fa-road icon-gray"></i> 
          <strong>Distância:</strong> <span id="distanciaAceita"></span> km
        </p>
      </div>
    
      <!-- Mapa -->
      <div id="mapaCorrida" class="mapa-corrida"></div>
    </div>
    
    
    </div>

    </div>
  </div>


  <div id="editarModal" class="modal hidden">
    
    <div class="modal-content">
      <h3>Editar Dados</h3>
      <label>Nome:</label>
      <input type="text" id="editarNome">

      <label>Telefone:</label>
      <input type="text" id="editarTelefone">
  
      <label>Modelo:</label>
      <input type="text" id="editarModelo">
  
      <label>Placa:</label>
      <input type="text" id="editarPlaca">

      <label>Bairro:</label>
      <select id="editarBairro">
        <option value="">Selecione um bairro</option>
      </select>
 
      <button onclick="salvarEdicao()">Salvar</button>
      <button onclick="fecharModal()" class="cancelar">Cancelar</button>
    </div>
  </div>

<div id="editarBairroModal" class="modal hidden">
  <div class="modal-content">
    <h3>Editar Bairro</h3>
    <select id="editarBairro">
      <option value="">Selecione um bairro</option>
    </select>
    <button onclick="salvarBairro()">Salvar</button>
    <button onclick="fecharModalBairro()" class="cancelar">Cancelar</button>
  </div>
</div>


<div id="cardHistoricoMotorista" class="cardFlutuante hidden">
  <div class="header-historico-motorista">
    <h3>Histórico de Corridas</h3>
    <button onclick="document.getElementById('cardHistoricoMotorista').classList.add('hidden')" class="fecharCard">×</button>
  </div>
  <div id="historicoMotoristaConteudo" class="conteudo-historico-motorista"></div>
</div>


<div id="cardCorridaFinalizada" class="hidden">
    <h3><i class="fas fa-flag-checkered"></i> Corrida Finalizada</h3>
    <p><i class="fas fa-map-marker-alt"></i> <strong>Partida:</strong> <span id="finalizadaPartida"></span></p>
    <p><i class="fas fa-location-dot"></i> <strong>Destino:</strong> <span id="finalizadaDestino"></span></p>
    <p><i class="fas fa-coins"></i> <strong>Preço a receber:</strong> <span id="finalizadaPreco"></span></p>
    <button onclick="fecharCardFinalizada()">
        <i class="fas fa-check"></i> Fechar
    </button>
</div>


<div id="chatPopup" class="chat-popup hidden">
  <div class="chat-header">
    <span>Chat Motoristas</span>
    <button onclick="toggleChatPopup()">✖</button>
  </div>
  <div id="chatMensagens" class="chat-mensagens"></div>
  <div class="chat-input">
    <input type="text" id="chatTexto" placeholder="Digite sua mensagem..." onkeypress="if(event.key === 'Enter') enviarMensagemChat()">
  </div>
  <div class="chat-submit">
    <button onclick="enviarMensagemChat()">Enviar</button>
  </div>
</div>


<div id="editarBairroCard" class="card-editar-bairro">
  <h2>Editar Bairro</h2>

  <label for="novoBairroSelect">Novo bairro:</label>
  <select id="novoBairroSelect">
    <!-- Carregado via JS -->
  </select>

  <div class="botoes">
    <button onclick="fecharCardBairro()">Cancelar</button>
    <button onclick="salvarNovoBairro()">Salvar</button>
  </div>
</div>


 <audio id="somNotificacao" src="https://static.wixstatic.com/mp3/c0e096_ce5a531e2c914f3daf9babde96c156a4.mp3" preload="auto"></audio>


  
</body>

<script src="script.js"></script>

</body>
</html>